# 정규표현식이란?

> 사전적인 의미로 특정한 규칙을 가진 문자열의 집합을 표현하는데 사용하는 형식 언어이며 주로 프로그래밍 언어나 텍스트 에디터등에서 문자열의 검색과 치환을 위한 용도로 쓰이고 있다.

---

# 정규표현식이 필요한 이유!

- 만약 주민등록번호의 뒷자리를 전부 "\*"로 변경을 해야 하는 상황이라고 가정하였을 때

  - 정규 표현 식을 사용하지 않고 반복문을 사용하여 원하는 부분에서 잘라서 문자를 변경할 수 있지만, 만약 처리하는 문자열이 복잡하거나 길어지면 구현하는데 더 어려워질 수 있다.

---

# 메타 문자 사용법

- 문자 클래스 []

  - 문자 클래스 []
    - 문자 클래스로 만들어진 정규식은 **"[ ] 사이의 문자들과 매치"** 라는 의미를 가지고 있다.
      - > 문자 클래스를 만드는 메타 문자인 [] 사이에는 어떤 문자도 들어갈 수 있다.
    - [a-zA-z]: 알바펫 모두
    - [0-9]: 숫자 모두
      - > 문자 클래스([]) 안에는 어떤 문자나 메타 문자도 사용할 수 있지만 주의해야 하는 문자가 있다. **^** 문자이다. 문자 클래스 안에 **^** 메타 문자를 사용할 경우에는 반대(not)라는 의미를 갖는다. 예를 들어 **[^0-9]** 라는 정규 표현식은 숫자가 아닌 문자만 매치된다.

- Dot(.)

  - 정규 표현식의 Dot(.) 메타 문자는 줄바꿈 문자인 **\n** 을 제외한 모든 문자와 매치됨을 의미한다.<br>
    `a.b`
  - > 위 정규식의 의미는 **"a + 모든문자 + b"** 즉 a와 b라는 문자 사이에 어떤 문자가 들어가도 모두 매치된다는 의미를 가지고 있다.
  - "aab"는 가운데 문자 "a"가 모든 문자를 의미하는 **.** 과 일치하므로 정규식과 매치된다.
  - "a0b"는 가운데 문자 "0"가 모든 문자를 의미하는 **.** 과 일치하므로 정규식과 매치된다.
  - "abc"는 "a"문자와 "b"문자 사이에 어떤 문자라도 하나는 있어야 하는 이 정규식과 일치하지 않으므로 매치되지 않는다.<br>

  `a[.]b`

  - > 위 정규식의 의미는 **"a + Dot(.)문자 + b"** 따라서 정규식 **a[.]b**는 "a.b" 문자열과 매치되고, "a0b" 문자열과는 매치되지 않는다.

- 반복(\*)

  `ca*t`

  - 이 정규식에는 반복을 의미하는 **[*]** 메타 문자가 사용된다.<br>여기에서 사용한 **[*]** 바로 앞에 있는 문자 a가 0부터 무한대로 반복될 수 있다는 의미이다.
    > **"\*"** 메타 문자의 반복 개수가 무한대라고 표현했지만 사실 메모리 제한으로 2억개 정도만 가능하다.

- 반복({m,n})

  **{}** 메타 문자를 사용하면 반복 횟수를 고정할 수 있다. **{m,n}** 정규식을 사용하면 반복 횟수가 m부터 n까지 매치할 수 있다.<br>
  또한 m또는 n을 생략할 수도 있다.<br>
  만약 **{,3}** 처럼 사용하면 반복 횟수가 3이상인 경우이고 **{3,}** 처럼 사용하면 반복 횟수가 3이하를 의미한다.<br>
  생략된 m은 0과 동일하며, 생략된 n은 무한대(2억 개 미만)의 의미를 갖는다.

  > **{1,}**은 **+**와 동일하고, **{0,}**은 **[*]**와 동일하다.

- 반복(?)

  반복은 아니지만 이와 비슷한 개념으로 **?**가 있다. **?**메타문자가 의미하는 것은 **{0,1}** 이다.

  `ab?c`

  > 위 정규식의 의미는 "a + b(있어도 되고 없어도 된다) + c" <br> 즉 b 문자가 있거나 없거나 둘 다 매치되는 경우이다.<br> **[*]**,**+**,**?** 메타 문자는 모두 **{m,n}** 형태로 고쵸 쓰는 것이 가능하지만 가급적 이해하기 쉽고 표햔도 간결한 **[*]**,**+**,**?** 메타 문자를 사용하는 것이 좋다.

# 파이썬에서 정규 표현식을 지원하는 re 모듈

파이썬은 정규 표현식을 지원하기 위해 re(regular expression의 약어) 모듈을 제공한다.<br>re 모듈은 파이썬을 설치할 때 자동으로 설치되는 표준 라이브러리이다.

`  import re
  p = re.compile('ab*')`
re.compile을 사용하여 정규 표현식(위 예에서는 ab\*)을 컴파일한다.<br> re.compile의 결과로 돌려주는 객체 p(컴파일된 패턴 객체)를 사용하여 그 이후의 작업을 수행한다.

# 정규식을 이용한 문자열 검색

컴파일된 패턴 객체는 다음과 같은 4가지 매서드를 제공한다.

- match() : 문자열의 처음부터 정규식과 매치되는지 소사한다.
- search() : 문자열 전체를 검색하여 정규식과 매치되는지 조사한다.
- findall() : 정규식과 매치되는 모든 문자열을 리스트로 리턴한다.
- finditer() : 정규식과 매치되는 모든 문자열을 반복 가능한 객체로 리턴한다.

match,search는 정규식과 매치될 때는 match객체를 리턴하고, 매치되지 않을 때는 None을 리턴한다.

# 코드 예제

- 간단한 전화번호 발췌하기
  <pre>
    <code>
        import re
        text = "문의사항이 있으면 032-232-3245 으로 연락주시기 바랍니다."
  
        regex = re.compile(r,'\d\d\d-\d\d\d-\d\d\d\d')
        matchobj = regex.search(text)
        phonenumber = matchobj.group()
        print(phonenumber)
    </code>
  </pre>

- 이 예제에서 re.compile(전화번호 패턴)함수는 전화번호 패턴에 갖는 정규식 객체를 리턴하게 되고, search()를 사용하여 첫번째 전화번호 패턴에 매칭되는 번호를 리턴한다. 그리고 이로부터 실제 전화번호를 얻기 위해서 group()메서드를 사용한다.
